<div
	class="regularForm snapshotSelectorTemplate"
	style="width: 900px; height: 672px;">

  <div id="window-header"
    ng-init="page = 0">
		<div class="caption-wrapper">
			<div class="caption">
        Настройки элемента
      </div>
		</div>
    <div class="spacer" style="width: 180px;"></div>
		<pl-tab-button class="display-table-cell" index="0" caption="Переменные" current="page" width="180"></pl-tab-button>
		<pl-tab-button class="display-table-cell" index="1" caption="Поля" current="page" width="180"></pl-tab-button>
		<pl-tab-button class="display-table-cell" index="2" caption="События" current="page" width="180"></pl-tab-button>
		<pl-tab-button class="display-table-cell" index="3" caption="Фабрики" current="page" width="180"></pl-tab-button>
	</div>

    <div style="
      height: 456px;
      overflow: auto;">

      <div
        style="padding: 24px;"
        ng-show="page == 0">
        <div style="height: 24px;">
          <div style="
            float: left;
            padding-right: 6px;">
            <div style="
              height: 24px;
              display: table-cell;
              vertical-align: middle;
              font-size: 12pt;">
              Состояние:
            </div>
          </div>
          <div style="float: left;"
            ng-click="ShowDefault()">
            <div
              style="
                width: 128px;
                height: 24px;
                display: table-cell;
                vertical-align: middle;
                font-size: 12pt;
                text-align: center;"
              ng-style="MutatedSwitchStyle()[0]">
              Стандартное
            </div>
          </div>
          <div
						style="float: left;"
						ng-if="instance"
            ng-click="ShowMutated()">
            <div
              style="
                width: 96px;
                height: 24px;
                display: table-cell;
                vertical-align: middle;
                font-size: 12pt;
                text-align: center;"
              ng-style="MutatedSwitchStyle()[1]">
              Текущее
            </div>
          </div>
        </div>
        <ul style="
          list-style: none;
          padding: 0px;
          margin: 0px;"
          ng-if="!mutatedView">
          <li
            style="
              margin-top: 6px;
              margin-bottom: 6px;"
            ng-repeat="variable in snapshot.settings.variables">
            <div style="
              padding-top: 12px;
              padding-bottom: 12px;">
              <div style="
                width: 384px;
                min-height: 24px;
                display: table-cell;
                vertical-align: middle;">
                  <div
										style="font-size: 12pt;"
										ng-if="variable.native">
                    {{variable.name}}
                  </div>
									<div ng-if="!variable.native">
										<input
											style="
												border: 0px solid #FFFFFF;
												padding: 0px;
												margin: 0px:
												font-size: 12pt;"
											type="text"
											placeholder="название переменной"
											ng-model="variable.name"/>
									</div>
                  <div style="
                    font-size: 10pt;
                    color: #424242;">
                    идентификатор:
										<span ng-if="variable.native">{{variable.id}}</span>
										<input
											style="
												border: 0px solid #FFFFFF;
												padding: 0px;
												margin: 0px:
												font-size: 10pt;"
											type="text"
											placeholder="новый идентификатор"
											ng-model="variable.id"
											ng-if="!variable.native"/>
                    <br>
                    тип:
										<span ng-if="variable.native">{{variable.type}}</span>
										<select
											style="
												border: 1px solid #FFD740;
												padding: 0px;
												margin: 0px:
												font-size: 10pt;"
											type="text"
											placeholder="новый идентификатор"
											ng-model="variable.type"
											ng-options="type as type for type in parameterType track by type"
											ng-if="!variable.native">
											<option value="">не выбран</option>
										</select>
                  </div>
              </div>
              <div style="
                width: 384px;
                height: 24px;
                display: table-cell;
                vertical-align: top;">
                <div style="padding: 4px;">
									<div ng-if="IsEnum(variable.id) && variable.native">
										<select
											style="min-width: 128px; height: 24px; padding-top: 0px; padding-bottom: 0px; padding-left: 8px; padding-right: 8px; border: 1px solid #FFD740; font-size: 12px;"
											ng-init="variableEnum = GetEnumByValue(GetEnum(variable.id),variable.value)"
											ng-model="variableEnum"
											ng-options="selectedItem as selectedItem.name for selectedItem in GetEnum(variable.id) track by selectedItem.value"
											ng-change="variable.value = variableEnum.value">
										</select>
									</div>
									<div ng-if="!IsEnum(variable.id) || !variable.native">
	                  <input
	                    style="width: 384px; height: 24px; padding-top: 0px; padding-bottom: 0px; padding-left: 8px; padding-right: 8px; border: 1px solid #FFD740; font-size: 12px;"
	                    type="text"
	                    placeholder="значение"
											ng-if="variable.type == '@string'"
	                    ng-model="variable.value"/>
										<input
	                    style="width: 384px; height: 24px; padding-top: 0px; padding-bottom: 0px; padding-left: 8px; padding-right: 8px; border: 1px solid #FFD740; font-size: 12px;"
	                    type="date"
	                    placeholder="значение"
											ng-if="variable.type == '@datetime'"
	                    ng-model="variable.value"/>
										<input
	                    style="width: 384px; height: 24px; padding-top: 0px; padding-bottom: 0px; padding-left: 8px; padding-right: 8px; border: 1px solid #FFD740; font-size: 12px;"
	                    type="number"
											step="1"
	                    placeholder="значение"
											ng-if="(variable.type == '@int') || (variable.type == '@long')"
	                    ng-model="variable.value"/>
										<input
	                    style="width: 384px; height: 24px; padding-top: 0px; padding-bottom: 0px; padding-left: 8px; padding-right: 8px; border: 1px solid #FFD740; font-size: 12px;"
	                    type="number"
											step="0.0001"
	                    placeholder="значение"
											ng-if="(variable.type == '@float') || (variable.type == '@double')"
	                    ng-model="variable.value"/>
										<input
											type="checkbox"
											ng-if="variable.type == '@boolean'"
											ng-model="variable.value"/>
									</div>
                </div>
                <div>
                  <span style="padding-left: 6px;">
                    <input
                      type="checkbox"
                      ng-model="variable.pass"><span style="font-size: 10pt;">передавать</span></input>
                  </span>
                  <span style="padding-left: 12px;">
                    <input
                      type="checkbox"
                      ng-model="variable.protect"><span style="font-size: 10pt;">не наследовать</span></input>
                  </span>
                </div>
              </div>
							<div style="
                height: 24px;
                display: table-cell;
                vertical-align: top;">
								<div style="
									padding: 4px;
									margin-left: 12px;">
									<img
										style="
											width: 18px;
											height: 18px;
											padding: 3px;
											background: #9E9E9E;"
										src="img/icons/ic_delete_white_24dp_1x.png"
										ng-click="DeleteVariable(variable)"
										ng-if="!variable.native">
								</div>
							</div>
						</div>
          </li>
					<div style="
						display: table;
						margin: 0 auto;">
						<img
							style="
								width: 48px;
								height: 48px;
								opacity: 0.2;"
							src="img/icons/ic_add_circle_black_48dp_1x.png"
							ng-click="AddNewVariable()">
					</div>
				</ul>
        <ul style="
          list-style: none;
          padding: 0px;
          margin: 0px;"
          ng-if="mutatedView">
          <li
            style="
              margin-top: 6px;
              margin-bottom: 6px;"
            ng-repeat="variable in mutatedSnapshot.settings.variables">
            <div style="
              padding-top: 12px;
              padding-bottom: 12px;">
              <div style="
                width: 384px;
                min-height: 24px;
                display: table-cell;
                vertical-align: middle;">
                  <div style="font-size: 12pt;">
                    {{variable.name}}
                  </div>
                  <div style="
                    font-size: 10pt;
                    color: #424242;">
                    идентификатор:{{variable.id}}
                    <br>
                    тип:{{variable.type}}
                  </div>
              </div>
              <div style="
                width: 384px;
                height: 24px;
                display: table-cell;
                vertical-align: middle;">
                <div style="padding-bottom: 4px;">
                  <div style="
                    width: 384px;
                    height: 24px;
                    border: 1px solid #FFD740;
                    font-size: 12px;
                    display: table-cell;
                    vertical-align: middle;">
                    <span style="
                      padding-top: 0px;
                      padding-bottom: 0px;
                      padding-left: 8px;
                      padding-right: 8px;">
                      {{variable.value}}
                    </span>
                  </div>
                </div>
                <div>
                  <span
                    style="
                      padding-left: 12px;
                      font-size: 10pt;"
                    ng-if="variable.pass">
                    передавать
                  </span>
                  <span
                    style="
                      padding-left: 12px;
                      font-size: 10pt;"
                    ng-if="variable.protect">
                    не наследовать
                  </span>
                </div>
              </div>
            </div>
          </li>
        </ul>
      </div>

      <div
        style="padding: 24px;"
        ng-if="page == 1">
				<div>
	        <span>Источник данных</span>
	        <select
	          ng-init="selected = {id: snapshot.settings.dataset}"
	          ng-model="selected"
	          ng-options="descriptor as descriptor.name for descriptor in descriptors track by descriptor.id"
	          ng-change="SetSelectedDescriptor(selected.id,avalibles,snapshot.settings)">
	          <option value="">не выбран</option>
	        </select>
				</div>

				<div style="
					height: 32px;
					margin-bottom: 6px;">
					<div style="
						float: left;
						margin-top: 4px;
						margin-bottom: 4px;">
						<div style="
							height: 24px;
							display: table-cell;
							vertical-align: middle;
							font-size: 12pt;">
							Параметры
						</div>
					</div>
					<div style="
						height: 24px;
						width: 24px;
						margin-top: 4px;
						margin-bottom: 4px;
						float: right;
						background: #FFD740;"
						ng-if="avalibles.avalibleParameters.length > 0">
						<img
						 	style="
								height: 24px;
								width: 24px;"
							src="img/icons/ic_add_white_24dp_1x.png"
							ng-click="OpenNewParameterDialog(snapshot.settings, avalibles)">
					</div>
				</div>
				<ul style="
					list-style: none;
					margin-top: 4px;
					margin-bottom: 4px;
					padding-left: 24px;">
					<div
						style="
							display: table;
							margin: 0 auto;"
						ng-if="snapshot.settings.modificators.length == 0">
						<div style="
							height: 24px;
							width: 196px;
							display: table-cell;
							vertical-align: middle;
							font-size: 10pt;
							text-align: center;">
							нет добавленых параметров
						</div>
					</div>
					<li
						style="
							height: 24px;
							padding-top: 4px;
							padding-bottom: 4px;"
						ng-repeat="parameter in snapshot.settings.modificators">
							<div style="float: left;">
								<div style="
									height: 24px;
									display: table-cell;
									vertical-align: middle;
									font-size: 10pt;">
									<div
										style="float: left;"
										ng-if="!parameter.dependency">{{parameter.value}}</div>
									<div
									 	style="
											float: left;
											font-weight: bold;"
										ng-if="parameter.dependency">{{parameter.affectorName}}</div>
									<img
									 	style="
											padding-left: 8px;
											padding-right: 8px;
											float: left;"
										src="img/icons/ic_keyboard_tab_black_18dp_1x.png">
									<div style="
										float: left;
										font-weight: bold;">{{parameter.name}}</div>
								</div>
							</div>
							<div style="float: right;">
								<img
									style="
										width: 18px;
										height: 18px;
										padding: 3px;
										background: #9E9E9E"
									src="img/icons/ic_delete_white_24dp_1x.png"
									ng-click="RemoveParameter(snapshot.settings.modificators,parameter)">
							</div>
					</li>
				</ul>

				<div style="
					height: 32px;
					margin-top: 24px;
					margin-bottom: 6px;">
					<div style="
						float: left;
						margin-top: 4px;
						margin-bottom: 4px;">
						<div style="
							height: 24px;
							display: table-cell;
							vertical-align: middle;
							font-size: 12pt;">
							Поля
						</div>
					</div>
				</div>
        <ul style="
					list-style: none;
					margin-top: 4px;
					margin-bottom: 4px;
					padding-left: 20px;">
					<div
						style="
							display: table;
							margin: 0 auto;"
						ng-if="snapshot.settings.fields.length == 0">
						<div style="
							height: 24px;
							width: 196px;
							display: table-cell;
							vertical-align: middle;
							font-size: 10pt;
							text-align: center;">
							нет доступных полей
						</div>
					</div>
          <li
					 	style="
							height: 24px;
							margin-top: 4px;
							margin-bottom: 4px;"
						ng-repeat="field in snapshot.settings.fields">
						<div style="float: left;">
							<div style="
								height: 24px;
								display: table-cell;
								vertical-align: middle;
								font-size: 10pt;">
								{{field.name}}
							</div>
						</div>
						<div style="float: right;">
							<div style="
								height: 24px;
								display: table-cell;
								vertical-align: middle;">
		            <select
									style="
										width: 256px;
										height: 24px;
										padding-left: 4px;
										padding-right: 4px;
										margin: 0px;
										border: 1px solid #FFD740;
										font-size: 10pt;"
		              ng-init="selectedField = {id: field.path}"
		              ng-model="selectedField"
		              ng-options="option as option.id for option in avalibles.avalibleFields | filter:{type:field.type} track by option.id"
		              ng-change="field.path = selectedField.id">
		              <option value="">не выбрано</option>
		            </select>
							</div>
						</div>
          </li>
        </ul>

      </div>

			<div
        style="padding: 24px;"
        ng-if="page == 2">
				<ul style="list-style: none; padding: 0px; margin: 0px;">
					<li ng-repeat="action in snapshot.settings.actions">
						<div style="margin-top: 12px; margin-bottom: 12px; font-size: 12pt;">
							{{action.name}}
						</div>
						<div ng-repeat="step in action.steps">
							<div style="padding-left: 12px; height: 24px; margin-top: 12px; margin-bottom: 12px;">
								<div style="float: left;">
									<div style="height: 24px; display: table-cell; vertical-align: middle;">
										<span style="padding-right: 12px; font-size: 10pt;">Тип действия:</span>
									</div>
								</div>
								<div style="float: left;">
									<div style="height: 24px;">
										<select
											style="
												height: 24px;
												padding: 0px;
												margin: 0px;
												front-size: 10pt;
												border: 1px solid #FFD740;"
											ng-init="selectedActionType = {value: step.actionType}"
											ng-model="selectedActionType"
											ng-options="atype as atype.name for atype in actionType track by atype.value"
											ng-change="step.actionType = selectedActionType.value">
											<option value="">не выбрано</option>
										</select>{{action.actionType}}
									</div>
								</div>
								<div style="float: right;">
									<img
										style="
											width: 18px;
											height: 18px;
											padding: 3px;
											background: #9E9E9E"
										src="img/icons/ic_delete_white_24dp_1x.png"
										ng-click="RemoveStep(action,step)">
								</div>
							</div>
							<div style="padding-left: 12px;" ng-if="selectedActionType.value == 'swap'">
								<div style="margin-top: 12px; margin-bottom: 12px; min-height: 48px;">
									<div style="display: table-cell; vertical-align: middle;">
										<div style="height: 24px; float: left; font-size: 12pt;">
											<div style="height: 24px; display: table-cell; vertical-align: middle;">
												<span style="padding-left: 4px; padding-right: 4px;">{{step.substitute.name}}</span>
											</div>
										</div>
										<div style="height: 24px; float: left;">
											<img
												style="
													height: 18px;
													width: 18px;
													padding: 3px;
													background: #FFD740;"
												src="img/icons/ic_more_horiz_white_18dp_1x.png"
												ng-click="OpenSnapshotSelectionDialog(step.substitute)">
										</div>
									</div>
									<div style="display: table-cell; vertical-align: middle;">
										<img
											style="width: 18px; height: 18px; margin-left: 12px; margin-right: 12px;"
											src="img/icons/ic_keyboard_tab_black_18dp_1x.png">
									</div>

									<div style="display: table-cell; vertical-align: middle; border: 1px solid #FFD740;">
										<div
											style="height: 24px; margin: 4px; float: left; background: #F5F5F5;"
											ng-repeat="__target in step.target">
											<div style="height: 24px; float: left;">
												<span style="padding-left: 4px; padding-right: 4px; font-size: 10pt;">{{__target.name}}</span>
											</div>
											<div style="height: 24px; float: left;">
												<img
													style="
														height: 18px;
														width: 18px;
														padding: 3px;"
													src="img/icons/ic_more_horiz_white_18dp_1x.png"
													ng-click="OpenSnapshotSelectionDialog(__target)">
											</div>
											<div style="height: 24px; float: left;">
												<img
													style="
														height: 18px;
														width: 18px;
														padding: 3px;
														opacity: 0.2;"
													src="img/icons/ic_delete_black_18dp_1x.png"
													ng-click="RemoveTarget(step.target,__target)">
											</div>
										</div>
										<div style="height: 24px; float: left;">
											<img
												style="
													height: 18px;
													width: 18px;
													padding: 3px;
													background: #FFD740;"
												src="img/icons/ic_more_horiz_white_18dp_1x.png"
												ng-click="AddTarget(step.target)">
										</div>
									</div>



								</div>
							</div>
							<div style="padding-left: 12px;" ng-if="selectedActionType.value == 'send'">
								<div style="margin-top: 12px; margin-bottom: 12px; min-height: 48px;">
									<div style="display: table-cell; vertical-align: middle; border: 1px solid #FFD740;">
										<div style="max-width: 384px;">
											<div
												style="height: 24px; margin: 4px; float: left; background: #F5F5F5;"
												ng-repeat="(key,value) in step.passingValues">
												<div style="height: 24px; float: left;">
													<span style="padding-left: 4px; padding-right: 4px; font-size: 10pt;">{{key}} как {{value}}</span>
												</div>
												<div style="height: 24px; float: left;">
													<img
														style="padding: 3px; opacity: 0.2;"
														src="img/icons/ic_delete_black_18dp_1x.png"
														ng-click="RemovePassingValue(step.passingValues,key)">
												</div>
											</div>
											<div style="height: 24px; margin: 4px; float: left;">
												<div style="float: left;">
													<div style="height: 24px; display: table-cell; vertical-align: middle;">
														<select
															style="
																max-width: 150px;
																height: 24px;
																padding: 0px;
																margin: 0px;
																front-size: 10pt;
																border: 1px solid #FFD740;"
															ng-model="selected"
															ng-options="variable.id as variable.name for variable in snapshot.settings.variables">
															<option value="">не выбрано</option>
														</select>
													</div>
												</div>
												<div style="float: left;">
													<div style="height: 24px; display: table-cell; vertical-align: middle;">
														<input
															style="
																max-width: 150px;
																height: 22px;
																padding: 0px;
																margin: 0px;
																front-size: 10pt;
																border: 1px solid #FFD740;"
															type="text"
															ng-model="decorator"/>
													</div>
												</div>
												<div style="float: left;">
													<img
														style="width: 24px; height: 24px; background: #FFD740;"
														src="img/icons/ic_add_white_24dp_1x.png"
														ng-click="AddPassingValue(step.passingValues, selected, decorator)">
												</div>
											</div>
										</div>
									</div>
									<div style="display: table-cell; vertical-align: middle;">
										<img
											style="width: 18px; height: 18px; margin-left: 12px; margin-right: 12px;"
											src="img/icons/ic_keyboard_tab_black_18dp_1x.png">
									</div>
									<div style="display: table-cell; vertical-align: middle; border: 1px solid #FFD740;">
										<div
											style="height: 24px; margin: 4px; float: left; background: #F5F5F5;"
											ng-repeat="__target in step.target">
											<div style="height: 24px; float: left;">
												<span style="padding-left: 4px; padding-right: 4px; font-size: 10pt;">{{__target.name}}</span>
											</div>
											<div style="height: 24px; float: left;">
												<img
													style="
														height: 18px;
														width: 18px;
														padding: 3px;"
													src="img/icons/ic_more_horiz_white_18dp_1x.png"
													ng-click="OpenSnapshotSelectionDialog(__target)">
											</div>
											<div style="height: 24px; float: left;">
												<img
													style="
														height: 18px;
														width: 18px;
														padding: 3px;
														opacity: 0.2;"
													src="img/icons/ic_delete_black_18dp_1x.png"
													ng-click="RemoveTarget(step.target,__target)">
											</div>
										</div>
										<div style="height: 24px; float: left;">
											<img
												style="
													height: 18px;
													width: 18px;
													padding: 3px;
													background: #FFD740;"
												src="img/icons/ic_more_horiz_white_18dp_1x.png"
												ng-click="AddTarget(step.target)">
										</div>
									</div>
								</div>
							</div>
							<div style="padding-left: 12px;" ng-if="selectedActionType.value == 'invoke'">
								<div style="display: table-cell; vertical-align: middle; border: 1px solid #FFD740;">
									<div style="max-width: 384px;">

										<select
											ng-init="selectedMethod=FindMethod(step.methodName,GetCommonMethods(step.target))"
											ng-model="selectedMethod"
											ng-options="method as method.name for method in GetCommonMethods(step.target) track by method.name"
											ng-change="step.methodName = selectedMethod.name; step.methodParameters = StripMethodParameters(selectedMethod.parameters)">
											<option value="">не выбрано</option>
										</select>

										<ul>
											<li ng-repeat="(key,value) in selectedMethod.parameters">
												<select
													ng-init="source = FindVariable(step.methodParameters[key],value.type)"
													ng-model="source"
													ng-options="source as source.name for source in snapshot.settings.variables | filter:{type:value.type} track by source.id"
													ng-change="step.methodParameters[key] = source.id">
												</select>
											</li>
										</ul>

									</div>
								</div>
								<div style="display: table-cell; vertical-align: middle;">
									<img
										style="width: 18px; height: 18px; margin-left: 12px; margin-right: 12px;"
										src="img/icons/ic_keyboard_tab_black_18dp_1x.png">
								</div>
								<div style="display: table-cell; vertical-align: middle; border: 1px solid #FFD740;">
									<div
										style="height: 24px; margin: 4px; float: left; background: #F5F5F5;"
										ng-repeat="__target in step.target">
										<div style="height: 24px; float: left;">
											<span style="padding-left: 4px; padding-right: 4px; font-size: 10pt;">{{__target.name}}</span>
										</div>
										<div style="height: 24px; float: left;">
											<img
												style="
													height: 18px;
													width: 18px;
													padding: 3px;"
												src="img/icons/ic_more_horiz_white_18dp_1x.png"
												ng-click="OpenSnapshotSelectionDialog(__target)">
										</div>
										<div style="height: 24px; float: left;">
											<img
												style="
													height: 18px;
													width: 18px;
													padding: 3px;
													opacity: 0.2;"
												src="img/icons/ic_delete_black_18dp_1x.png"
												ng-click="RemoveTarget(step.target,__target)">
										</div>
									</div>
									<div style="height: 24px; float: left;">
										<img
											style="
												height: 18px;
												width: 18px;
												padding: 3px;
												background: #FFD740;"
											src="img/icons/ic_more_horiz_white_18dp_1x.png"
											ng-click="AddTarget(step.target)">
									</div>
								</div>
							</div>
						</div>
						<div>
							<div style="
								display: table;
								margin: 0 auto;">
								<img
									style="
										width: 48px;
										height: 48px;
										opacity: 0.2;"
									src="img/icons/ic_add_circle_black_48dp_1x.png"
									ng-click="AddStep(action)">
							</div>
						</div>

					</li>
				</ul>
			</div>

			<div
        style="padding: 24px;"
        ng-if="page == 3">
				<ul style="list-style: none; padding: 0px; margin: 0px;">
					<li
						style="margin-bottom: 24px;"
						ng-repeat="factory in snapshot.factories"
						ng-init="params={}">
						<div style="
							height: 32px;
							margin-bottom: 6px;">
							<div style="
								float: left;
								margin-top: 4px;
								margin-bottom: 4px;">
								<input
									style="
										width: 512px;
										margin: 0px;
										padding: 0px;
										border: solid 0px #FFFFFF;
										font-size: 14pt;"
									type="text"
									placeholder="Название фабрики"
									ng-model="factory.name"/>
							</div>
							<div style="
								float: right;
								margin-top: 4px;
								margin-bottom: 4px;">
								<div style="
									height: 24px;
									display: table-cell;
									vertical-align: middle;
									font-size: 12pt;">
									<img
										style="
											width: 18px;
											height: 18px;
											padding: 3px;
											background: #9E9E9E;"
										src="img/icons/ic_delete_white_24dp_1x.png"
										ng-click="RemoveFactory(factory)">
								</div>
							</div>
						</div>
						<div style="
							height: 32px;
							margin-bottom: 6px;">
							<div style="
								float: left;
								margin-top: 4px;
								margin-bottom: 4px;">
								<div style="
									height: 24px;
									display: table-cell;
									vertical-align: middle;
									font-size: 12pt;">
									<span
									 	style="
											font-size: 12pt;
											margin-right: 12px;">Информер: </span>
									<span
									 	style="
											font-size: 10pt;
											margin-right: 12px;"
										ng-if="factory.target.name">{{factory.target.name}}</span>
									<span
										style="
											font-size: 10pt;
											margin-right: 12px;
											color: #C1C1C1;
											font-style: italic;"
										ng-if="!factory.target.name">информер не выбран</span>
								</div>
								<div style="
									height: 24px;
									display: table-cell;
									vertical-align: middle;
									font-size: 12pt;">
									<img
										style="
											height: 18px;
											width: 18px;
											padding: 3px;
											background: #FFD740;"
										src="img/icons/ic_more_horiz_white_18dp_1x.png"
										ng-click="OpenSnapshotSelectionDialog(factory.target)">
								</div>
							</div>
						</div>
						<div style="
							height: 32px;
							margin-bottom: 6px;">
							<div style="
								float: left;
								margin-top: 4px;
								margin-bottom: 4px;
								margin-right: 12px;">
								<div style="
									height: 24px;
									display: table-cell;
									vertical-align: middle;
									font-size: 12pt;">
						      <span>Источник данных</span>
								</div>
							</div>
							<div style="
								float: left;
								margin-top: 4px;
								margin-bottom: 4px;">
								<div style="
									height: 24px;
									display: table-cell;
									vertical-align: middle;
									font-size: 12pt;">
									<select
										style="
											height: 24px;
											padding-left: 4px;
											padding-right: 4px;
											margin: 0px;
											border: 1px solid #FFD740;
											font-size: 10pt;"
										ng-init="selected = FindDescriptorById(factory.dataset);SetFactorySelectedDescritor(selected.id,params,factory)"
										ng-model="selected"
										ng-options="descriptor as descriptor.name for descriptor in descriptors track by descriptor.id"
										ng-change="SetFactorySelectedDescritor(selected.id,params,factory)">
										<option value="">не выбран</option>
									</select>
								</div>
							</div>
						</div>
						<div style="
							height: 32px;
							margin-bottom: 6px;">
							<div style="
								float: left;
								margin-top: 4px;
								margin-bottom: 4px;">
								<div style="
									height: 24px;
									display: table-cell;
									vertical-align: middle;
									font-size: 12pt;">
									Параметры
								</div>
							</div>
							<div style="
								height: 24px;
								width: 24px;
								margin-top: 4px;
								margin-bottom: 4px;
								float: right;
								background: #FFD740;"
								ng-if="params.avalibleParameters.length > 0">
								<img
								 	style="
										height: 24px;
										width: 24px;"
									src="img/icons/ic_add_white_24dp_1x.png"
									ng-click="OpenNewParameterDialog(factory,params)">
							</div>
						</div>
						<ul style="
							list-style: none;
							margin-top: 4px;
							margin-bottom: 4px;
							padding-left: 24px;">
							<div
								style="
									display: table;
									margin: 0 auto;"
								ng-if="factory.parameters.length == 0">
								<div style="
									height: 24px;
									width: 196px;
									display: table-cell;
									vertical-align: middle;
									font-size: 10pt;
									text-align: center;">
									нет добавленых параметров
								</div>
							</div>
							<li
								style="
									height: 24px;
									padding-top: 4px;
									padding-bottom: 4px;"
								ng-repeat="parameter in factory.modificators">
									<div style="float: left;">
										<div style="
											height: 24px;
											display: table-cell;
											vertical-align: middle;
											font-size: 10pt;">
											<div
												style="float: left;"
												ng-if="!parameter.dependency">{{parameter.value}}</div>
											<div
											 	style="
													float: left;
													font-weight: bold;"
												ng-if="parameter.dependency">{{parameter.affectorName}}</div>
											<img
											 	style="
													padding-left: 8px;
													padding-right: 8px;
													float: left;"
												src="img/icons/ic_keyboard_tab_black_18dp_1x.png">
											<div style="
												float: left;
												font-weight: bold;">{{parameter.name}}</div>
										</div>
									</div>
									<div style="float: right;">
										<img
											style="
												width: 18px;
												height: 18px;
												padding: 3px;
												background: #9E9E9E"
											src="img/icons/ic_delete_white_24dp_1x.png"
											ng-click="RemoveParameter(factory.modificators,parameter)">
									</div>
							</li>
						</ul>
						<div style="
							height: 32px;
							margin-top: 24px;
							margin-bottom: 6px;">
							<div style="
								float: left;
								margin-top: 4px;
								margin-bottom: 4px;">
								<div style="
									height: 24px;
									display: table-cell;
									vertical-align: middle;
									font-size: 12pt;">
									Поля
								</div>
							</div>
							<div style="
								height: 24px;
								width: 24px;
								margin-top: 4px;
								margin-bottom: 4px;
								float: right;
								background: #FFD740;">
								<img
								 	style="
										height: 24px;
										width: 24px;"
									src="img/icons/ic_add_white_24dp_1x.png"
									ng-click="AddFactoryField(factory)">
							</div>
						</div>
		        <ul style="
							list-style: none;
							margin-top: 4px;
							margin-bottom: 4px;
							padding-left: 20px;">
		          <li
							 	style="
									height: 24px;
									margin-top: 4px;
									margin-bottom: 4px;"
								ng-repeat="field in factory.fields">
								<div style="float: left; margin-right: 6px;">
									<div style="
										height: 24px;
										display: table-cell;
										vertical-align: middle;
										font-size: 10pt;">
										<input
											style="
												paddin: 0px;
												margin: 0px;
												border: solid 0px #FFFFFF;
												font-size: 10pt;"
											type="text"
											placeholder="идентификатор"
											ng-model="field.id"/>
									</div>
								</div>
								<div style="float: left; margin-right: 6px;">
									<div style="
										height: 24px;
										display: table-cell;
										vertical-align: middle;
										font-size: 10pt;">
										<input
											style="
												paddin: 0px;
												margin: 0px;
												border: solid 0px #FFFFFF;
												font-size: 10pt;"
											type="text"
											placeholder="название"
											ng-model="field.name"/>
									</div>
								</div>
								<div style="float: left; margin-right: 6px;">
									<div style="
										height: 24px;
										display: table-cell;
										vertical-align: middle;
										font-size: 10pt;">
										<select
											style="
												height: 24px;
												padding-left: 4px;
												padding-right: 4px;
												margin: 0px;
												border: 1px solid #FFD740;
												font-size: 10pt;"
											ng-model="field.type"
											ng-options="stype as stype for stype in parameterType track by stype">
										</select>
									</div>
								</div>
								<div style="float: left;">
									<div style="
										height: 24px;
										display: table-cell;
										vertical-align: middle;">
				            <select
											style="
												width: 256px;
												height: 24px;
												padding-left: 4px;
												padding-right: 4px;
												margin: 0px;
												border: 1px solid #FFD740;
												font-size: 10pt;"
				              ng-init="selectedField = {id: field.path}"
				              ng-model="selectedField"
				              ng-options="option as option.id for option in params.avalibleFields | filter:{type:field.type} track by option.id"
				              ng-change="field.path = selectedField.id">
				              <option value="">не выбрано</option>
				            </select>
									</div>
								</div>
								<div style="float: right;">
									<div style="
										height: 24px;
										display: table-cell;
										vertical-align: middle;
										font-size: 10pt;">
										<img
											style="
												width: 18px;
												height: 18px;
												padding: 3px;
												background: #9E9E9E;"
											src="img/icons/ic_delete_white_24dp_1x.png"
											ng-click="RemoveFactoryField(factory,field)">
									</div>
								</div>
		          </li>
		        </ul>
					</li>
					<div style="
						display: table;
						margin: 0 auto;">
						<img
							style="
								width: 48px;
								height: 48px;
								opacity: 0.2;"
							src="img/icons/ic_add_circle_black_48dp_1x.png"
							ng-click="AddFactory()">
					</div>
				</ul>
			</div>

    </div>

    <div id="window-footer">
			<div class="float-right" style="margin-top: 18px; margin-right: 12px;">
				<pl-button action="Save" caption="Сохранить"></pl-button>
			</div>
			<div class="float-right" style="margin-top: 18px;	margin-right: 12px;">
				<pl-button action="Close" caption="Отменить"></pl-button>
			</div>
		</div>

		<div style="
			width: 100%;
			height: 100%;
			left: 0px;
			top: 0px;
			position: absolute;
			opacity: 0.5;
			background: #FEFEFE;"
			ng-if="parameterAdding || snapshotSelection">
		</div>

		<div style="
			width: 512px;
			left: 50%;
			top: 50%;
			position: absolute;
			transform: translate(-50%, -50%);
			background: #FFFFFF;
			box-shadow: 0px 0px 8px rgba(0,0,0,0.2);"
			ng-if="parameterAdding">
			<div style="
				height: 48px;
				background: #FFD740;
				padding-left: 24px;">
				<div style="
					height: 48px;
					display: table-cell;
					vertical-align: middle;
					font-size: 14pt;
					color: #424242;">
					Новый параметер
				</div>
			</div>

			<div style="padding: 24px;">

				<div style="
					margin-top: 8px;
					margin-bottom: 8px;">
					<div style="
						height: 24px;
						display: table-cell;
						vertical-align: middle;
						margin-bottom: 4px;">
						<span style="
							font-size: 12pt;
							padding-right: 4px;">
							Параметер сервиса:
						</span>
						<select
							style="
								height: 24px;
								border: 1px solid #FFD740;
								margin: 0px;
								padding-left: 4px;
								padding-right; 4px;
								padding-top: 0px;
								padding-bottom: 0px;
								font-size: 10pt;"
							ng-model="newParameter.to"
							ng-options="parameter as parameter.name for parameter in dialogAvalibles.avalibleParameters"
							ng-change="newParameter.treset()">
							<option value="">не выбран</option>
						</select>
					</div>
				</div>
				<div style="
					margin-top: 8px;
					margin-bottom: 8px;">
					<div style="
						height: 24px;
						display: table-cell;
						vertical-align: middle;">
						<span style="
							font-size: 12pt;
							padding-right: 4px;">
							Динамический параметер
						</span>
						<input
							type="checkbox"
							ng-model="newParameter.dynamic"
							ng-change="newParameter.dreset()"/>
					</div>
				</div>

				<div style="
					margin-top: 8px;
					margin-bottom: 8px;">
						<div
							style="
								height: 24px;
								display: table-cell;
								vertical-align: middle;"
							ng-if="newParameter.dynamic">
							<span style="
								font-size: 12pt;
								padding-right: 4px;">
								Значение из переменной
							</span>
							<select
								style="
									height: 24px;
									border: 1px solid #FFD740;
									margin: 0px;
									padding-left: 4px;
									padding-right; 4px;
									padding-top: 0px;
									padding-bottom: 0px;
									font-size: 10pt;"
								ng-model="newParameter.from"
								ng-options="variable as variable.name for variable in snapshot.settings.variables | filter:{type:newParameter.to.type}">
								<option value="">не выбрано</value>
							</select>
						</div>
						<div
							style="
								height: 24px;
								display: table-cell;
								vertical-align: middle;"
							ng-if="!newParameter.dynamic">
							<span style="
								font-size: 12pt;
								padding-right: 4px;">
								Значение:
							</span>
							<input
								style="
									height: 24px;
									border: 0px solid #FFFFFF;
									margin: 0px;
									padding-left: 4px;
									padding-right; 4px;
									padding-top: 0px;
									padding-bottom: 0px;
									font-size: 10pt;"
								type="text"
								placeholder="значение"
								ng-model="newParameter.value"/>
						</div>
				</div>
			</div>

			<div style="
				height: 36px;
				padding: 12px;
				background: #FAFAFA;">

				<div class="float-right">
					<pl-button action="AddParameter" caption="Добавить"></pl-button>
				</div>
				<div class="float-right" style="margin-right: 12px;">
					<pl-button action="CloseNewParameterDialog" caption="Отменить"></pl-button>
				</div>

			</div>

		</div>

		<div style="
			width: 768px;
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			background: #FFFFFF;
			box-shadow: 0px 0px 8px rgba(0,0,0,0.2);"
			ng-if="snapshotSelection">

				<div style="
					height: 48px;
					background: #FFD740;">

					<div style="
						float: left;
						padding-left: 24px;">
						<div style="
							height: 48px;
							display: table-cell;
							vertical-align: middle;
							font-size: 14pt;
							color: #424242;">
							Выбор информера
						</div>
					</div>

				</div>

				<div style="
					height: 72px;
					background: #F5F5F5;">

					<div style="
						float: right;
						padding-right: 24px;">
						<div style="
							height: 72px;
							display: table-cell;
							vertical-align: middle;">
							<input
								style="
									width: 256px;
									height: 24px;
									margin: 0px;
									padding-left: 4px;
									padding-right: 4px;
									font-size: 10pt;
									border: 0px solid #FFFFFF;"
								type="text"
								placeholder="Поиск"
								ng-model="searchInput"/>
						</div>
					</div>

					<div style="float: right;">
						<div style="
							height: 72px;
							display: table-cell;
							vertical-align: middle;
							padding-right: 12px;">
							<span>Категория:</span>
							<select style="
								min-width: 128px;
								height: 24px;
								margin: 0px;
								padding: 0px;
								font-size: 10pt;
								border: 0px solid #FFFFFF;"
								ng-model="selectedCategory">
								<option
									value = "{{category}}"
									ng-repeat="category in avalibleCategories">{{setCategoryHeader(category)}}</option>
							</select>
						</div>
					</div>

				</div>

				<ul style="
					list-style: none;
					padding-top: 0px;
					padding-bottom: 0px;
					padding-left: 12px;
					padding-right: 0px;
					margin: 0px;
					overflow: auto;
					height: 340px;">
					<li
						style="
							width: 128px;
							height: 152px;
							padding: 8px;
							float: left;"
						ng-repeat="snapshot in avalibleSnapshots | filter:{name:searchInput}"
						ng-if="FitsCategory(snapshot.category,selectedCategory) && (snapshot.id != SelectedParent.id)">
						<div style="
							margin: 8px;
							position: relative;">
							<img
								style="
									width: 112px;
									height: 112px;"
								src="{{snapshot.imgPath}}"
								ng-click="SelectSnapshot(snapshot)">
						</div>
						<div style="
							width: 128px;
							height: 24px;
							overflow: hidden;
							text-overflow: ellipsis;
							text-align: center;">
							<span style="font-size: 10pt;">{{snapshot.name}}<span ng-if="snapshot.id == snapshotSelectionTemp.id">*</span></span>
						</div>
					</li>
				</ul>

				<div style="
					height: 72px;
					background: #F5F5F5;">

					<div class="float-right" style="margin-top: 18px; margin-right: 24px;">
						<pl-button action="ConfirmSelection" caption="Выбрать"></pl-button>
					</div>
					<div class="float-right" style="margin-top: 18px; margin-right: 12px;">
						<pl-button action="CloseSnapshotSelectionDialog" caption="Отменить"></pl-button>
					</div>

				</div>

		</div>


</div>
